DEBUG:botocore.hooks:Changing event name from creating-client-class.iot-data to creating-client-class.iot-data-plane
DEBUG:botocore.hooks:Changing event name from before-call.apigateway to before-call.api-gateway
DEBUG:botocore.hooks:Changing event name from request-created.machinelearning.Predict to request-created.machine-learning.Predict
DEBUG:botocore.hooks:Changing event name from before-parameter-build.autoscaling.CreateLaunchConfiguration to before-parameter-build.auto-scaling.CreateLaunchConfiguration
DEBUG:botocore.hooks:Changing event name from before-parameter-build.route53 to before-parameter-build.route-53
DEBUG:botocore.hooks:Changing event name from request-created.cloudsearchdomain.Search to request-created.cloudsearch-domain.Search
DEBUG:botocore.hooks:Changing event name from docs.*.autoscaling.CreateLaunchConfiguration.complete-section to docs.*.auto-scaling.CreateLaunchConfiguration.complete-section
DEBUG:botocore.hooks:Changing event name from before-parameter-build.logs.CreateExportTask to before-parameter-build.cloudwatch-logs.CreateExportTask
DEBUG:botocore.hooks:Changing event name from docs.*.logs.CreateExportTask.complete-section to docs.*.cloudwatch-logs.CreateExportTask.complete-section
DEBUG:botocore.hooks:Changing event name from before-parameter-build.cloudsearchdomain.Search to before-parameter-build.cloudsearch-domain.Search
DEBUG:botocore.hooks:Changing event name from docs.*.cloudsearchdomain.Search.complete-section to docs.*.cloudsearch-domain.Search.complete-section
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/boto3/data/s3/2006-03-01/resources-1.json
DEBUG:botocore.utils:IMDS ENDPOINT: http://169.254.169.254/
DEBUG:botocore.credentials:Looking for credentials via: env
DEBUG:botocore.credentials:Looking for credentials via: assume-role
DEBUG:botocore.credentials:Looking for credentials via: assume-role-with-web-identity
DEBUG:botocore.credentials:Looking for credentials via: sso
DEBUG:botocore.credentials:Looking for credentials via: shared-credentials-file
INFO:botocore.credentials:Found credentials in shared credentials file: ~/.aws/credentials
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/endpoints.json
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/sdk-default-configuration.json
DEBUG:botocore.hooks:Event choose-service-name: calling handler <function handle_service_name_alias at 0x7f21c6d21cf0>
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/s3/2006-03-01/service-2.json
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/s3/2006-03-01/endpoint-rule-set-1.json.gz
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/partitions.json
DEBUG:botocore.hooks:Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x7f21c6c86200>
DEBUG:botocore.hooks:Event creating-client-class.s3: calling handler <function lazy_call.<locals>._handler at 0x7f21c6bbd6c0>
DEBUG:botocore.hooks:Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x7f21c6c85fc0>
DEBUG:botocore.endpoint:Setting s3 timeout as (60, 60)
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/_retry.json
DEBUG:botocore.client:Registering retry handlers for service: s3
DEBUG:botocore.utils:Registering S3 region redirector handler
DEBUG:boto3.resources.factory:Loading s3:s3
DEBUG:boto3.resources.factory:Loading s3:Bucket
DEBUG:boto3.resources.model:Renaming Bucket attribute name
DEBUG:botocore.hooks:Event creating-resource-class.s3.Bucket: calling handler <function lazy_call.<locals>._handler at 0x7f21c6bbda20>
DEBUG:botocore.hooks:Event choose-service-name: calling handler <function handle_service_name_alias at 0x7f21c6d21cf0>
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/iot-data/2015-05-28/service-2.json
DEBUG:botocore.loaders:Loading JSON file: /home/ubuntu/.local/lib/python3.10/site-packages/botocore/data/iot-data/2015-05-28/endpoint-rule-set-1.json.gz
DEBUG:botocore.hooks:Event creating-client-class.iot-data-plane: calling handler <function check_openssl_supports_tls_version_1_2 at 0x7f21c6d4c700>
DEBUG:botocore.hooks:Event creating-client-class.iot-data-plane: calling handler <function add_generate_presigned_url at 0x7f21c6c85fc0>
DEBUG:botocore.endpoint:Setting data-ats.iot timeout as (60, 60)
DEBUG:botocore.client:Registering retry handlers for service: iot-data
 * Serving Flask app 'server'
 * Debug mode: off
INFO:werkzeug:[31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:5000
 * Running on http://172.31.22.97:5000
INFO:werkzeug:[33mPress CTRL+C to quit[0m

INFO:4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Starting run for UUID : 4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3
INFO:4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Request body parsed
INFO:4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Created base dir for request
INFO:4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Created json input file
INFO:4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Copied esp project source files
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Code Generation Started
INFO:werkzeug:54.86.50.139 - - [18/Apr/2023 11:05:49] "[35m[1mPOST /gen_code HTTP/1.1[0m" 202 -
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Generating source code from /tmp/builds/4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3/input.json into /tmp/builds/4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3/esp_project_source/main
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Source code generation successfull
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Building esp32 firmware from /tmp/builds/4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3/esp_project_source
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:ESP32 firmware generation successfull
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Placed firmware binary : /tmp/builds/4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3/Auto_Build.bin
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Deleted esp source files
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Uploading /tmp/builds/4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3/Auto_Build.bin to s3
DEBUG:s3transfer.utils:Acquiring 0
DEBUG:s3transfer.tasks:UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616c9d0>}) about to wait for the following futures []
DEBUG:s3transfer.tasks:UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616c9d0>}) done waiting for dependent futures
DEBUG:s3transfer.tasks:Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616c9d0>}) with kwargs {'client': <botocore.client.S3 object at 0x7f21c64b7a30>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7f21c60f7c40>, 'osutil': <s3transfer.utils.OSUtils object at 0x7f21c60f7d60>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7f21c60f7fd0>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616c9d0>}
DEBUG:s3transfer.futures:Submitting task PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7f21c60f7fd0> for transfer request: 0.
DEBUG:s3transfer.utils:Acquiring 0
DEBUG:s3transfer.tasks:PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) about to wait for the following futures []
DEBUG:s3transfer.tasks:PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) done waiting for dependent futures
DEBUG:s3transfer.tasks:Executing task PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7f21c64b7a30>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f21c616cf70>, 'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}
DEBUG:s3transfer.utils:Releasing acquire 0/None
DEBUG:botocore.hooks:Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f21c6d4d510>
DEBUG:botocore.hooks:Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f21c60be950>>
DEBUG:botocore.regions:Calling endpoint provider with parameters: {'Bucket': 'denbu-ota-files', 'Region': 'ap-south-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': False, 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
DEBUG:botocore.regions:Endpoint provider result: https://denbu-ota-files.s3.ap-south-1.amazonaws.com
DEBUG:botocore.regions:Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
DEBUG:botocore.regions:Selected auth type "v4" as "v4" with signing context params: {'region': 'ap-south-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7f21c6d4c1f0>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7f21c6d2f5b0>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7f21c6d4caf0>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7f21c6d2f520>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f21c6d4d360>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f21c60be950>>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7f21c6d2f370>
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function conditionally_calculate_md5 at 0x7f21c6dca950>
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7f21c6d2f880>
DEBUG:botocore.handlers:Adding expect 100 continue header to request.
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7f21c6d2f010>
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7f21c6d4cc10>
DEBUG:botocore.endpoint:Making request for OperationModel(name=PutObject) with params: {'url_path': '/Auto_Build.bin', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115 Resource', 'Content-MD5': '1imGqrGQV7gbOmsewYEX/Q==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7f21c616cf70>, 'auth_path': '/denbu-ota-files/Auto_Build.bin', 'url': 'https://denbu-ota-files.s3.ap-south-1.amazonaws.com/Auto_Build.bin', 'context': {'client_region': 'ap-south-1', 'client_config': <botocore.config.Config object at 0x7f21c63e4340>, 'has_streaming_input': True, 'auth_type': 'v4', 'signing': {'region': 'ap-south-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 's3_redirect': {'redirected': False, 'bucket': 'denbu-ota-files', 'params': {'Bucket': 'denbu-ota-files', 'Key': 'Auto_Build.bin', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f21c616cf70>}}}}
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f21c6390940>
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f21c64b76d0>>
DEBUG:botocore.hooks:Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f21c6d2f250>
DEBUG:botocore.hooks:Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f21c6d4d480>
DEBUG:botocore.auth:Calculating signature using v4 auth.
DEBUG:botocore.auth:CanonicalRequest:
PUT
/Auto_Build.bin

content-md5:1imGqrGQV7gbOmsewYEX/Q==
host:denbu-ota-files.s3.ap-south-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20230418T110711Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
DEBUG:botocore.auth:StringToSign:
AWS4-HMAC-SHA256
20230418T110711Z
20230418/ap-south-1/s3/aws4_request
b09b3ca4016d8c4447380a94d1b282b61544d46f0e5fd42a81badbd818fab198
DEBUG:botocore.auth:Signature:
abb58ab44e5bedd722c221dfbe1b8dd674df362b3a9c7cbceb445870fc7993dd
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f21c63909d0>
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f21c6d4d2d0>
DEBUG:botocore.endpoint:Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://denbu-ota-files.s3.ap-south-1.amazonaws.com/Auto_Build.bin, headers={'User-Agent': b'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115 Resource', 'Content-MD5': b'1imGqrGQV7gbOmsewYEX/Q==', 'Expect': b'100-continue', 'X-Amz-Date': b'20230418T110711Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQFSK3ANHUF5WRGMS/20230418/ap-south-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=abb58ab44e5bedd722c221dfbe1b8dd674df362b3a9c7cbceb445870fc7993dd', 'amz-sdk-invocation-id': b'84e6c78e-6b8d-4c63-91de-33b8561612c3', 'amz-sdk-request': b'attempt=1', 'Content-Length': '831776'}>
DEBUG:botocore.httpsession:Certificate path: /etc/ssl/certs/ca-certificates.crt
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): denbu-ota-files.s3.ap-south-1.amazonaws.com:443
DEBUG:botocore.awsrequest:Waiting for 100 Continue response.
DEBUG:botocore.awsrequest:100 Continue response seen, now sending request body.
DEBUG:urllib3.connectionpool:https://denbu-ota-files.s3.ap-south-1.amazonaws.com:443 "PUT /Auto_Build.bin HTTP/1.1" 200 0
DEBUG:botocore.parsers:Response headers: {'x-amz-id-2': '5yljG06DvoBy8XGMPjGcAMq0sAVxTpatia6bApXXTp5uh+UZZ6aKaCFav4DAg5p1BN/wDimWGZle8qsLaCsG6Q==', 'x-amz-request-id': 'X4XPVSC1G4P4PVKR', 'Date': 'Tue, 18 Apr 2023 11:07:12 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"d62986aab19057b81b3a6b1ec18117fd"', 'Server': 'AmazonS3', 'Content-Length': '0'}
DEBUG:botocore.parsers:Response body:
b''
DEBUG:botocore.hooks:Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f21c60be890>
DEBUG:botocore.retryhandler:No retry needed.
DEBUG:botocore.hooks:Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f21c60be950>>
DEBUG:s3transfer.utils:Releasing acquire 0/None
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Uploaded to s3
DEBUG:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Uploaded file https://denbu-ota-files.s3.ap-south-1.amazonaws.com/Auto_Build.bin
DEBUG:botocore.regions:Calling endpoint provider with parameters: {'Region': 'ap-south-1', 'UseDualStack': False, 'UseFIPS': False}
DEBUG:botocore.regions:Endpoint provider result: https://data-ats.iot.ap-south-1.amazonaws.com
DEBUG:botocore.hooks:Event before-parameter-build.iot-data-plane.Publish: calling handler <function generate_idempotent_uuid at 0x7f21c6d2f370>
DEBUG:botocore.hooks:Event before-call.iot-data-plane.Publish: calling handler <function add_recursion_detection_header at 0x7f21c6d2f010>
DEBUG:botocore.hooks:Event before-call.iot-data-plane.Publish: calling handler <function inject_api_version_header_if_needed at 0x7f21c6d4cc10>
DEBUG:botocore.endpoint:Making request for OperationModel(name=Publish) with params: {'url_path': '/topics/esp%2Fcommand', 'query_string': {'contentType': 'OTA location'}, 'method': 'POST', 'headers': {'x-amz-mqtt5-payload-format-indicator': 'UTF8_DATA', 'User-Agent': 'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115'}, 'body': b'{"Command for": 1, "payload": "OTA"}', 'url': 'https://data-ats.iot.ap-south-1.amazonaws.com/topics/esp%2Fcommand?contentType=OTA%20location', 'context': {'client_region': 'ap-south-1', 'client_config': <botocore.config.Config object at 0x7f21c60f5270>, 'has_streaming_input': True, 'auth_type': None}}
DEBUG:botocore.hooks:Event request-created.iot-data-plane.Publish: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f21c60f51e0>>
DEBUG:botocore.hooks:Event choose-signer.iot-data-plane.Publish: calling handler <function set_operation_specific_signer at 0x7f21c6d2f250>
DEBUG:botocore.auth:Calculating signature using v4 auth.
DEBUG:botocore.auth:CanonicalRequest:
POST
/topics/esp%252Fcommand
contentType=OTA%20location
host:data-ats.iot.ap-south-1.amazonaws.com
x-amz-date:20230418T110711Z
x-amz-mqtt5-payload-format-indicator:UTF8_DATA

host;x-amz-date;x-amz-mqtt5-payload-format-indicator
fae7c00289cfbaad8d363f56812d2ab2339b89efe3519566d31830f39b6894da
DEBUG:botocore.auth:StringToSign:
AWS4-HMAC-SHA256
20230418T110711Z
20230418/ap-south-1/iotdata/aws4_request
c90158a3f78a3978df36a9a0fb550b4acffffe0de42cb3ee65d56e8107e68836
DEBUG:botocore.auth:Signature:
9dc163ef91f70c7070824715bd86ef2d6fb0ed7e8d94098704cb5c40ad836140
DEBUG:botocore.hooks:Event request-created.iot-data-plane.Publish: calling handler <function add_retry_headers at 0x7f21c6d4d2d0>
DEBUG:botocore.endpoint:Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://data-ats.iot.ap-south-1.amazonaws.com/topics/esp%2Fcommand?contentType=OTA%20location, headers={'x-amz-mqtt5-payload-format-indicator': b'UTF8_DATA', 'User-Agent': b'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115', 'X-Amz-Date': b'20230418T110711Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQFSK3ANHUF5WRGMS/20230418/ap-south-1/iotdata/aws4_request, SignedHeaders=host;x-amz-date;x-amz-mqtt5-payload-format-indicator, Signature=9dc163ef91f70c7070824715bd86ef2d6fb0ed7e8d94098704cb5c40ad836140', 'amz-sdk-invocation-id': b'2c767023-80b4-45d6-ae41-c09f9ecc923f', 'amz-sdk-request': b'attempt=1', 'Content-Length': '36'}>
DEBUG:botocore.httpsession:Certificate path: /etc/ssl/certs/ca-certificates.crt
DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): data-ats.iot.ap-south-1.amazonaws.com:443
DEBUG:urllib3.connectionpool:https://data-ats.iot.ap-south-1.amazonaws.com:443 "POST /topics/esp%2Fcommand?contentType=OTA%20location HTTP/1.1" 200 65
DEBUG:botocore.parsers:Response headers: {'content-type': 'application/json', 'content-length': '65', 'date': 'Tue, 18 Apr 2023 11:07:11 GMT', 'x-amzn-RequestId': '8561335c-9a38-1c56-0980-970e0b26256a', 'connection': 'keep-alive'}
DEBUG:botocore.parsers:Response body:
b'{"message":"OK","traceId":"8561335c-9a38-1c56-0980-970e0b26256a"}'
DEBUG:botocore.hooks:Event needs-retry.iot-data-plane.Publish: calling handler <botocore.retryhandler.RetryHandler object at 0x7f21c60f6b90>
DEBUG:botocore.retryhandler:No retry needed.
INFO:code_gen-4df9aea0-f44e-4fd1-a8f2-aebe4e3a75e3:Published to MQTT

INFO:f9460c42-1a06-4757-b9e1-3063f95813e7:Starting run for UUID : f9460c42-1a06-4757-b9e1-3063f95813e7
INFO:f9460c42-1a06-4757-b9e1-3063f95813e7:Request body parsed
INFO:f9460c42-1a06-4757-b9e1-3063f95813e7:Created base dir for request
INFO:f9460c42-1a06-4757-b9e1-3063f95813e7:Created json input file
INFO:f9460c42-1a06-4757-b9e1-3063f95813e7:Copied esp project source files
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Code Generation Started
INFO:werkzeug:54.86.50.139 - - [18/Apr/2023 11:14:49] "[35m[1mPOST /gen_code HTTP/1.1[0m" 202 -
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Generating source code from /tmp/builds/f9460c42-1a06-4757-b9e1-3063f95813e7/input.json into /tmp/builds/f9460c42-1a06-4757-b9e1-3063f95813e7/esp_project_source/main
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Source code generation successfull
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Building esp32 firmware from /tmp/builds/f9460c42-1a06-4757-b9e1-3063f95813e7/esp_project_source
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:ESP32 firmware generation successfull
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Placed firmware binary : /tmp/builds/f9460c42-1a06-4757-b9e1-3063f95813e7/Auto_Build.bin
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Deleted esp source files
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Uploading /tmp/builds/f9460c42-1a06-4757-b9e1-3063f95813e7/Auto_Build.bin to s3
DEBUG:s3transfer.utils:Acquiring 0
DEBUG:s3transfer.tasks:UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616ee00>}) about to wait for the following futures []
DEBUG:s3transfer.tasks:UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616ee00>}) done waiting for dependent futures
DEBUG:s3transfer.tasks:Executing task UploadSubmissionTask(transfer_id=0, {'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616ee00>}) with kwargs {'client': <botocore.client.S3 object at 0x7f21c64b7a30>, 'config': <boto3.s3.transfer.TransferConfig object at 0x7f21c60f7d60>, 'osutil': <s3transfer.utils.OSUtils object at 0x7f21c60f71c0>, 'request_executor': <s3transfer.futures.BoundedExecutor object at 0x7f21c60f7f10>, 'transfer_future': <s3transfer.futures.TransferFuture object at 0x7f21c616ee00>}
DEBUG:s3transfer.futures:Submitting task PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) to executor <s3transfer.futures.BoundedExecutor object at 0x7f21c60f7f10> for transfer request: 0.
DEBUG:s3transfer.utils:Acquiring 0
DEBUG:s3transfer.tasks:PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) about to wait for the following futures []
DEBUG:s3transfer.tasks:PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) done waiting for dependent futures
DEBUG:s3transfer.tasks:Executing task PutObjectTask(transfer_id=0, {'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}) with kwargs {'client': <botocore.client.S3 object at 0x7f21c64b7a30>, 'fileobj': <s3transfer.utils.ReadFileChunk object at 0x7f21c616f580>, 'bucket': 'denbu-ota-files', 'key': 'Auto_Build.bin', 'extra_args': {}}
DEBUG:botocore.hooks:Event before-endpoint-resolution.s3: calling handler <function customize_endpoint_resolver_builtins at 0x7f21c6d4d510>
DEBUG:botocore.hooks:Event before-endpoint-resolution.s3: calling handler <bound method S3RegionRedirectorv2.redirect_from_cache of <botocore.utils.S3RegionRedirectorv2 object at 0x7f21c60be950>>
DEBUG:botocore.regions:Calling endpoint provider with parameters: {'Bucket': 'denbu-ota-files', 'Region': 'ap-south-1', 'UseFIPS': False, 'UseDualStack': False, 'ForcePathStyle': False, 'Accelerate': False, 'UseGlobalEndpoint': False, 'DisableMultiRegionAccessPoints': False, 'UseArnRegion': True}
DEBUG:botocore.regions:Endpoint provider result: https://denbu-ota-files.s3.ap-south-1.amazonaws.com
DEBUG:botocore.regions:Selecting from endpoint provider's list of auth schemes: "sigv4". User selected auth scheme is: "None"
DEBUG:botocore.regions:Selected auth type "v4" as "v4" with signing context params: {'region': 'ap-south-1', 'signing_name': 's3', 'disableDoubleEncoding': True}
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function validate_ascii_metadata at 0x7f21c6d4c1f0>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function sse_md5 at 0x7f21c6d2f5b0>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function convert_body_to_file_like_object at 0x7f21c6d4caf0>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function validate_bucket_name at 0x7f21c6d2f520>
DEBUG:s3transfer.utils:Releasing acquire 0/None
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function remove_bucket_from_url_paths_from_model at 0x7f21c6d4d360>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.annotate_request_context of <botocore.utils.S3RegionRedirectorv2 object at 0x7f21c60be950>>
DEBUG:botocore.hooks:Event before-parameter-build.s3.PutObject: calling handler <function generate_idempotent_uuid at 0x7f21c6d2f370>
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function conditionally_calculate_md5 at 0x7f21c6dca950>
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function add_expect_header at 0x7f21c6d2f880>
DEBUG:botocore.handlers:Adding expect 100 continue header to request.
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function add_recursion_detection_header at 0x7f21c6d2f010>
DEBUG:botocore.hooks:Event before-call.s3.PutObject: calling handler <function inject_api_version_header_if_needed at 0x7f21c6d4cc10>
DEBUG:botocore.endpoint:Making request for OperationModel(name=PutObject) with params: {'url_path': '/Auto_Build.bin', 'query_string': {}, 'method': 'PUT', 'headers': {'User-Agent': 'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115 Resource', 'Content-MD5': 'FocY0tvrjpe2E3D8mSnBAg==', 'Expect': '100-continue'}, 'body': <s3transfer.utils.ReadFileChunk object at 0x7f21c616f580>, 'auth_path': '/denbu-ota-files/Auto_Build.bin', 'url': 'https://denbu-ota-files.s3.ap-south-1.amazonaws.com/Auto_Build.bin', 'context': {'client_region': 'ap-south-1', 'client_config': <botocore.config.Config object at 0x7f21c63e4340>, 'has_streaming_input': True, 'auth_type': 'v4', 'signing': {'region': 'ap-south-1', 'signing_name': 's3', 'disableDoubleEncoding': True}, 's3_redirect': {'redirected': False, 'bucket': 'denbu-ota-files', 'params': {'Bucket': 'denbu-ota-files', 'Key': 'Auto_Build.bin', 'Body': <s3transfer.utils.ReadFileChunk object at 0x7f21c616f580>}}}}
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <function signal_not_transferring at 0x7f21c6390940>
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f21c64b76d0>>
DEBUG:botocore.hooks:Event choose-signer.s3.PutObject: calling handler <function set_operation_specific_signer at 0x7f21c6d2f250>
DEBUG:botocore.hooks:Event before-sign.s3.PutObject: calling handler <function remove_arn_from_signing_path at 0x7f21c6d4d480>
DEBUG:botocore.auth:Calculating signature using v4 auth.
DEBUG:botocore.auth:CanonicalRequest:
PUT
/Auto_Build.bin

content-md5:FocY0tvrjpe2E3D8mSnBAg==
host:denbu-ota-files.s3.ap-south-1.amazonaws.com
x-amz-content-sha256:UNSIGNED-PAYLOAD
x-amz-date:20230418T111609Z

content-md5;host;x-amz-content-sha256;x-amz-date
UNSIGNED-PAYLOAD
DEBUG:botocore.auth:StringToSign:
AWS4-HMAC-SHA256
20230418T111609Z
20230418/ap-south-1/s3/aws4_request
e851909fb9c6b9c54b9a70e5928ddcb1c79f7a6608f0c12277de3692cc3a8d11
DEBUG:botocore.auth:Signature:
1a8abc3d83dda85d61a6e345c9ff7d70b9320cf41d195f047ebb5b2c10c5d5c4
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <function signal_transferring at 0x7f21c63909d0>
DEBUG:botocore.hooks:Event request-created.s3.PutObject: calling handler <function add_retry_headers at 0x7f21c6d4d2d0>
DEBUG:botocore.endpoint:Sending http request: <AWSPreparedRequest stream_output=False, method=PUT, url=https://denbu-ota-files.s3.ap-south-1.amazonaws.com/Auto_Build.bin, headers={'User-Agent': b'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115 Resource', 'Content-MD5': b'FocY0tvrjpe2E3D8mSnBAg==', 'Expect': b'100-continue', 'X-Amz-Date': b'20230418T111609Z', 'X-Amz-Content-SHA256': b'UNSIGNED-PAYLOAD', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQFSK3ANHUF5WRGMS/20230418/ap-south-1/s3/aws4_request, SignedHeaders=content-md5;host;x-amz-content-sha256;x-amz-date, Signature=1a8abc3d83dda85d61a6e345c9ff7d70b9320cf41d195f047ebb5b2c10c5d5c4', 'amz-sdk-invocation-id': b'7fab3560-073d-4405-86cc-da4b631bb532', 'amz-sdk-request': b'attempt=1', 'Content-Length': '831760'}>
DEBUG:botocore.httpsession:Certificate path: /etc/ssl/certs/ca-certificates.crt
DEBUG:urllib3.connectionpool:Resetting dropped connection: denbu-ota-files.s3.ap-south-1.amazonaws.com
DEBUG:botocore.awsrequest:Waiting for 100 Continue response.
DEBUG:botocore.awsrequest:100 Continue response seen, now sending request body.
DEBUG:urllib3.connectionpool:https://denbu-ota-files.s3.ap-south-1.amazonaws.com:443 "PUT /Auto_Build.bin HTTP/1.1" 200 0
DEBUG:botocore.parsers:Response headers: {'x-amz-id-2': '2xAA78EFG2JsERSqOCHU2fEVvMGS98CuIUWwiIAd/gZYq3PXN8/2Xa/XEGhbwV5H8+9mM2j6qFso1H5IOMzE1A==', 'x-amz-request-id': 'F177MBS96GT4BKSZ', 'Date': 'Tue, 18 Apr 2023 11:16:10 GMT', 'x-amz-server-side-encryption': 'AES256', 'ETag': '"168718d2dbeb8e97b61370fc9929c102"', 'Server': 'AmazonS3', 'Content-Length': '0'}
DEBUG:botocore.parsers:Response body:
b''
DEBUG:botocore.hooks:Event needs-retry.s3.PutObject: calling handler <botocore.retryhandler.RetryHandler object at 0x7f21c60be890>
DEBUG:botocore.retryhandler:No retry needed.
DEBUG:botocore.hooks:Event needs-retry.s3.PutObject: calling handler <bound method S3RegionRedirectorv2.redirect_from_error of <botocore.utils.S3RegionRedirectorv2 object at 0x7f21c60be950>>
DEBUG:s3transfer.utils:Releasing acquire 0/None
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Uploaded to s3
DEBUG:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Uploaded file https://denbu-ota-files.s3.ap-south-1.amazonaws.com/Auto_Build.bin
DEBUG:botocore.regions:Calling endpoint provider with parameters: {'Region': 'ap-south-1', 'UseDualStack': False, 'UseFIPS': False}
DEBUG:botocore.regions:Endpoint provider result: https://data-ats.iot.ap-south-1.amazonaws.com
DEBUG:botocore.hooks:Event before-parameter-build.iot-data-plane.Publish: calling handler <function generate_idempotent_uuid at 0x7f21c6d2f370>
DEBUG:botocore.hooks:Event before-call.iot-data-plane.Publish: calling handler <function add_recursion_detection_header at 0x7f21c6d2f010>
DEBUG:botocore.hooks:Event before-call.iot-data-plane.Publish: calling handler <function inject_api_version_header_if_needed at 0x7f21c6d4cc10>
DEBUG:botocore.endpoint:Making request for OperationModel(name=Publish) with params: {'url_path': '/topics/esp%2Fcommand', 'query_string': {'contentType': 'OTA location'}, 'method': 'POST', 'headers': {'x-amz-mqtt5-payload-format-indicator': 'UTF8_DATA', 'User-Agent': 'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115'}, 'body': b'{"Command for": 1, "payload": "OTA"}', 'url': 'https://data-ats.iot.ap-south-1.amazonaws.com/topics/esp%2Fcommand?contentType=OTA%20location', 'context': {'client_region': 'ap-south-1', 'client_config': <botocore.config.Config object at 0x7f21c60f5270>, 'has_streaming_input': True, 'auth_type': None}}
DEBUG:botocore.hooks:Event request-created.iot-data-plane.Publish: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x7f21c60f51e0>>
DEBUG:botocore.hooks:Event choose-signer.iot-data-plane.Publish: calling handler <function set_operation_specific_signer at 0x7f21c6d2f250>
DEBUG:botocore.auth:Calculating signature using v4 auth.
DEBUG:botocore.auth:CanonicalRequest:
POST
/topics/esp%252Fcommand
contentType=OTA%20location
host:data-ats.iot.ap-south-1.amazonaws.com
x-amz-date:20230418T111609Z
x-amz-mqtt5-payload-format-indicator:UTF8_DATA

host;x-amz-date;x-amz-mqtt5-payload-format-indicator
fae7c00289cfbaad8d363f56812d2ab2339b89efe3519566d31830f39b6894da
DEBUG:botocore.auth:StringToSign:
AWS4-HMAC-SHA256
20230418T111609Z
20230418/ap-south-1/iotdata/aws4_request
9519c623e2ffca293a4a8bd169f30cec847e44246bdcb985dd772d0d41bab5e7
DEBUG:botocore.auth:Signature:
5e62f79efc6e1fb393d399869fbd0e2719afb137bbbf43b4947173d112f83628
DEBUG:botocore.hooks:Event request-created.iot-data-plane.Publish: calling handler <function add_retry_headers at 0x7f21c6d4d2d0>
DEBUG:botocore.endpoint:Sending http request: <AWSPreparedRequest stream_output=False, method=POST, url=https://data-ats.iot.ap-south-1.amazonaws.com/topics/esp%2Fcommand?contentType=OTA%20location, headers={'x-amz-mqtt5-payload-format-indicator': b'UTF8_DATA', 'User-Agent': b'Boto3/1.26.115 Python/3.10.6 Linux/5.19.0-1022-aws Botocore/1.29.115', 'X-Amz-Date': b'20230418T111609Z', 'Authorization': b'AWS4-HMAC-SHA256 Credential=AKIAQFSK3ANHUF5WRGMS/20230418/ap-south-1/iotdata/aws4_request, SignedHeaders=host;x-amz-date;x-amz-mqtt5-payload-format-indicator, Signature=5e62f79efc6e1fb393d399869fbd0e2719afb137bbbf43b4947173d112f83628', 'amz-sdk-invocation-id': b'a06651b5-a28f-43fb-a422-3a015d778e59', 'amz-sdk-request': b'attempt=1', 'Content-Length': '36'}>
DEBUG:botocore.httpsession:Certificate path: /etc/ssl/certs/ca-certificates.crt
DEBUG:urllib3.connectionpool:Resetting dropped connection: data-ats.iot.ap-south-1.amazonaws.com
DEBUG:urllib3.connectionpool:https://data-ats.iot.ap-south-1.amazonaws.com:443 "POST /topics/esp%2Fcommand?contentType=OTA%20location HTTP/1.1" 200 65
DEBUG:botocore.parsers:Response headers: {'content-type': 'application/json', 'content-length': '65', 'date': 'Tue, 18 Apr 2023 11:16:10 GMT', 'x-amzn-RequestId': 'bde163c1-2b1f-1a8a-0e7c-c362f0691e1e', 'connection': 'keep-alive'}
DEBUG:botocore.parsers:Response body:
b'{"message":"OK","traceId":"bde163c1-2b1f-1a8a-0e7c-c362f0691e1e"}'
DEBUG:botocore.hooks:Event needs-retry.iot-data-plane.Publish: calling handler <botocore.retryhandler.RetryHandler object at 0x7f21c60f6b90>
DEBUG:botocore.retryhandler:No retry needed.
INFO:code_gen-f9460c42-1a06-4757-b9e1-3063f95813e7:Published to MQTT
